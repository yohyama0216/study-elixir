# AWSでbotを防ぐには
## セキュリティグループ
IPによる制限

## WAF
HTTPによる制限
RateBasedRulesによる制限

CloudFrontでホットリンキングを防ぐ方法
CloudFrontでホットリンキングを防ぐ一般的な方法は、**リファラーチェック（Referrer Check）**を使用することです。この方法では、HTTPリファラーヘッダーをチェックして、リクエストが許可されたドメインから来ているかどうかを検証します。

ステップバイステップ設定
CloudFrontディストリビューションの設定

AWS Management ConsoleでCloudFrontのダッシュボードを開き、編集したいディストリビューションを選択します。
ビヘイビアの編集

ディストリビューションのビヘイビア（Behavior）リストから、編集するビヘイビアを選択し、「ビヘイビアを編集」をクリックします。
カスタムオリジンリクエストポリシーの選択

「オリジンリクエストポリシー」の設定で「カスタムポリシー」を選び、適切なポリシーを設定します。
リファラーヘッダーのホワイトリスティング

新しいオリジンリクエストポリシーを作成（または既存のポリシーを編集）し、「HTTPヘッダーを含める」セクションでRefererヘッダーを追加します。
リファラーヘッダーに基づいて許可するドメインを指定します。例えば、自分のサイトがexample.comの場合、このドメインのリファラーのみを許可し、他は拒否します。
ディストリビューションの更新

全ての設定を確認し、変更を保存してからディストリビューションを更新します。変更が反映されるまで数分かかる場合があります。
動作の説明
設定されたリファラーチェックにより、CloudFrontはHTTPリクエストのRefererヘッダーを検査します。許可されたリファラー（例：example.comからのリクエスト）の場合のみ、リソースへのアクセスが許可されます。
許可されていないリファラーからのリクエストは、CloudFrontによって拒否されます。これにより、外部のウェブサイトが直接リンクを通じて画像を表示することが防がれます。
利点
帯域幅の節約: 不正なウェブサイトによる帯域幅の消費を防ぎ、コストを節約できます。
コンテンツの保護: 自サイトのコンテンツが不正利用されるのを防ぎます
